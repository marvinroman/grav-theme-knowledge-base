{% extends 'partials/base.html.twig' %}

{% block content %}
    <article>
        <section class="header">
            <h1>
            {% if (page.header.logo) %}
                <img src="/images/{{ page.header.logo }}" />
            {% else %}
                {% if page.header.media == 'video' %}
                    <i class="fas fa-video"></i>
                {% elseif page.header.icon is defined %}
                    <i class="fas fa-{{page.header.icon}}"></i>
                {% else %}
                    <i class="far fa-file-alt"></i>
                {% endif %}
                {{ page.title|e }}
            {% endif %}
            </h1>
            <div class="digital">
                <span class="social">
                {% if (page.header.youtube) %}
                    <a title="youtube" href="{{page.header.youtube}}"><i class="fab fa-youtube fa-3x"></i></a>
                {% endif %}
                {% if (page.header.facebook) %}
                    <a title="facebook" href="{{page.header.facebook}}"><i class="fab fa-facebook fa-3x"></i></a>
                {% endif %}
                {% if (page.header.vimeo) %}
                    <a title="vimeo" href="{{page.header.vimeo}}"><i class="fab fa-vimeo fa-3x"></i></a>
                {% endif %}
                {% if (page.header.spotify) %}
                    <a title="spotify" href="{{page.header.spotify}}"><i class="fab fa-spotify fa-3x"></i></a>
                {% endif %}
                {% if (page.header.soundcloud) %}
                    <a title="soundcloud" href="{{page.header.soundcloud}}"><i class="fab fa-soundcloud fa-3x"></i></a>
                {% endif %}
                {% if (page.header.itunes) %}
                    <a title="itunes" href="{{page.header.itunes}}"><i class="fab fa-itunes fa-3x"></i></a>
                {% endif %}
                {% if (page.header.google) %}
                    <a title="google" href="{{page.header.google}}"><i class="fab fa-google-play fa-3x"></i></a>
                {% endif %}
                {% if (page.header.rss) %}
                    <a title="rss" href="{{page.header.rss}}"><i class="fas fa-rss-square fa-3x"></i></a>
                {% endif %}
                {% if (page.header.overcast) %}
                    <a title="overcast" href="{{page.header.overcast}}"><i class="fas fa-podcast fa-3x"></i></a>
                {% endif %}
                {% if (page.header.stitcher) %}
                    <a title="stitcher" href="{{page.header.stitcher}}"><i class="fas fa-podcast fa-3x"></i></a>
                {% endif %}
                {% if (page.header.playerfm) %}
                    <a title="playerfm" href="{{page.header.playerfm}}"><i class="fas fa-podcast fa-3x"></i></a>
                {% endif %}
                {% if (page.header.podtail) %}
                    <a title="podtail" href="{{page.header.podtail}}"><i class="fas fa-podcast fa-3x"></i></a>
                {% endif %}
                {% if (page.header.podbean) %}
                    <a title="podbean" href="{{page.header.podbean}}"><i class="fas fa-podcast fa-3x"></i></a>
                {% endif %}
                {% if (page.header.fansfm) %}
                    <a title="fansfm" href="{{page.header.fansfm}}"><i class="fas fa-podcast fa-3x"></i></a>
                {% endif %}
                {% if (page.header.podbay) %}
                    <a title="podbay" href="{{page.header.podbay}}"><i class="fas fa-podcast fa-3x"></i></a>
                {% endif %}
                {% if (page.header.tunein) %}
                    <a title="tunein" href="{{page.header.tunein}}"><i class="fas fa-podcast fa-3x"></i></a>
                {% endif %}
                {% if (page.header.iheart) %}
                    <a title="iheart" href="{{page.header.iheart}}"><i class="fas fa-podcast fa-3x"></i></a>
                {% endif %}
                {% if (page.header.listennotes) %}
                    <a title="listennotes" href="{{page.header.listennotes}}"><i class="fas fa-podcast fa-3x"></i></a>
                {% endif %}
                {% if (page.header.podparadise) %}
                    <a title="podparadise" href="{{page.header.podparadise}}"><i class="fas fa-podcast fa-3x"></i></a>
                {% endif %}
                {% if (page.header.castbox) %}
                    <a title="castbox" href="{{page.header.castbox}}"><i class="fas fa-podcast fa-3x"></i></a>
                {% endif %}
                {% if (page.header.chartable) %}
                    <a title="chartable" href="{{page.header.chartable}}"><i class="fas fa-podcast fa-3x"></i></a>
                {% endif %}
                {% if (page.header.twitter) %}
                    <a title="@{{page.header.twitter}}" href="http://www.twitter.com/{{page.header.twitter}}"><i class="fab fa-twitter fa-3x"></i></a>
                {% endif %}
                {% if (page.header.website) %}
                    <a href="{{page.header.website}}"><i class="fas fa-link fa-3x"></i></a>
                {% endif %}
                </span>
            </div>
            <div class="details">
                {% if grav.theme.config.params.articles.show.date %}
                    <span class="date">{{ page.date|date("F j, Y") }}</span>
                {% endif %}
                {% if grav.theme.config.params.articles.show.authors %}
                    {% set authorlist = [] %}
                    {% for author in page.taxonomy['author'] %}
                        {# Check to see if a dedicated author page exists #}
                        {% set slug = author|hyphenize|url_encode %}
                        {% set p = page.find('/authors/'~slug) %}
                        {% if p == null %}
                            {% set authorlist = authorlist|merge(['<a href="'~base_url~'/taxonomy?name=author&amp;val='~(author|url_encode)~'">'~author~'</a>']) %}
                        {% else %}
                            {% set authorlist = authorlist|merge(['<a href="'~base_url~'/authors/'~slug~'">'~author~'</a>']) %}
                        {% endif %}
                    {% endfor %}
                    <span>
                        <i class="fa fa-user"></i>
                        {{ authorlist|join(', ') }}</span>
                {% endif %}
                {% if grav.theme.config.params.articles.show.topics %}
                    {% set catlist = [] %}
                    {% for cat in page.taxonomy.category %}
                        {% set catlist = catlist|merge(['<a href="'~base_url~'/taxonomy?name=category&amp;val='~(cat|url_encode)~'">'~cat~'</a>']) %}
                    {% endfor %}
                    <span>{{ catlist|join(', ') }}</span>
                {% endif %}
            </div>
            {% if (page.header.funding) or (page.header.patreon) or (page.header.donate) %}
            <div class="financing">
                {% if (page.header.funding) %}
                <span class="funding"><i class="fas fa-search-dollar"></i> {{page.header.funding}}</span>
                {% endif %}
                {% if (page.header.patreon) %}
                <span class="patreon"><i class="fab fa-patreon"></i>  <a href="{{page.header.patreon}}">{{page.header.patreon}}</a></span>
                {% endif %}
                {% if (page.header.donate) %}
                <span class="donate"><i class="fas fa-donate"></i> <a href="{{page.header.donate}}">{{page.header.donate}}</a></span>
                {% endif %}
            </div>
            {% endif %}
        </section>
        <section class="content">
            {{ page.content }}
            <p></p>
            {% for image in page.media.images %}
                {{ image.cropResize(700, 400).html("title", "alt", "itemscreenshot") }}
            {% endfor %}

        </section>
        <section class="foot">
            {% if page.taxonomy.tag|length > 0 %}
                {% set taglist = [] %}
                {% for tag in page.taxonomy.tag %}
                    {% set taglist = taglist|merge(['<a href="'~base_url~'/taxonomy?name=tag&amp;val='~(tag|url_encode)~'">'~tag~'</a>']) %}
                {% endfor %}
                <div class="tags">
                    <i class="fa fa-tags rightpad"></i>
                    {{ taglist|join(', ') }}
                </div>
            {% endif %}
            {% if config.plugins.relatedpages.enabled and related_pages|length > 0 %}
                <div class="related topiclist">
                    <h2>{{ 'RELATED_ARTICLES'|t }}</h2>
                    {% include 'partials/relatedpages.html.twig' %}
                </div>
            {% endif %}
        </section>
        {% if config.plugins.comments.enabled %}
            <section class="comments">
                <h2>{{ 'COMMENTS'|t }}</h2>
            </section>
        {% endif %}
    </article>
{% endblock %}
